<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script type="text/javascript">
		var httpReq = null;
		function getInstance() {
			if(window.XMLHttpRequest){
				httpReq = new XMLHttpRequest(); //모든 브라우져 > XMLHttpRequest
		   }else if(window.ActiveXObject){ //IE6 이하 ...
			   httpReq = new ActiveXObject("Msxml2.XMLHTTP");
		   }else{
		       throw new Error("AJAX 지원하지 않습니다");
		   }
			return httpReq; //주소값을 가지는것을 리턴 
		}
		function handlerStateChange(){ //이벤트 발생시마다 호출 
			if(httpReq.readyState === 4){  //서버로부터 응답을 받으면 
				//그 응답이 정상적인 응답이라면 (status == 200 ~ 299)
				if(httpReq.status >= 200 && httpReq.status < 300){  //응답이 오고 정상건이라면 
					document.getElementById("container").innerHTML = httpReq.responseText;
				}
			}
		
		}
		function sendData() {
			httpReq = getInstance();
			
			httpReq.onreadystatechange = handlerStateChange; // handlerStateChange(); 바로 걸어줄때는 ()쓰지 않는다 
			
			httpReq.open("GET","Ex01_Server.html"); //요청준비
			httpReq.send(); //서버로 요청 보내기 
			
		}
	</script>
</head>
<body>
<h3> 이미지</h3>
<img src="images/1.jpg" style="width: 150px;height: 150px">
<h3>비동기(ajax) 요청 처리하기</h3>
<input type="button" value="비동기처리" onclick="sendData()">
<div id="container">first data load ... </div>
<h3>동기식 데이터 처리</h3>
<a href="Ex01_Server.html"> 데이터 요청</a>
</body>
</html>